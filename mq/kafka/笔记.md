#### 1.安装

###### 1.1 docker上的安装

使用docker-compose.yml

```yml
version: '3.1'
services:

  zookeeper:
    image: wurstmeister/zookeeper
    ports:
      - 2181:2181

  kafka:
    image: wurstmeister/kafka
    depends_on:
      - zookeeper
    ports:
      - 9092:9092
    environment:
      KAFKA_ADVERTISED_HOST_NAME: 172.171.15.98
      KAFKA_CREATE_TOPICS: "customer-topic:1:1"
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
    volumes:
      - /var/data/kafka/docker.sock:/var/run/docker.sock
```
kafka集群管理页面

```bash
docker run -itd --name=kafka-manager -p 9000:9000 -e ZK_HOSTS="172.171.15.98:2181" sheepkiller/kafka-manager
```



#### 2. 常用命令

```bash
# 查询kafka的home目录
echo $KAFKA_HOME

# 列出topic
kafka-topics.sh --list --bootstrap-server localhost:9092

# 创建topic 
kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic test

# 发送message
kafka-console-producer.sh --broker-list localhost:9092 --topic test

# 接收message 
kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-beginning
```



#### 3. 概要

![整体架构](./producer.jpg)









